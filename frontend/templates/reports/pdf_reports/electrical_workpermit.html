{% extends "reports/pdf_reports/workpermit_base.html" %}

{% block inline_css %}
<style>
.logos {
    max-width: 5.8rem;
    max-height: 1.8rem;
    width: auto;
    height: auto;
    object-fit: contain;
}
#subtitle{
    background-color: #01579b;
    color:white;
    padding-left: 20px;
    padding-right: 20px;
    padding-top: 6px;
    padding-bottom: 6px;
    border-radius: 25px;
    font-size: 20px;
    text-align: center;
    white-space: nowrap;
    display:flex;
    justify-content: center;
}
.spaced-row-after td {
            position: relative;
        }

.spaced-row-before td {
            position: relative;
        }
.spaced-row-before td::before {
    content: '';
    display: block;
    height: 10px; /* Adjust this value to increase/decrease space */
}

.spaced-row-after td::after {
    content: '';
    display: block;
    height: 10px; /* Adjust this value to increase/decrease space */
}
li {
    font-size: small;
}
.color-red {
        color: red;
        font-weight: bolder;
    }
</style>
{% endblock inline_css %}

{% block header_start %}
<img src="{{ client_logo }}" alt="" class="logos">
{% endblock header_start %}


{% block header_end %}
<div>
    <img src="{{ static('assets/media/images/reportlogo.png') }}" alt="SPS" class="companylogo">
</div>
{% endblock header_end %}

{% block header_center %}
<div id="title">
    <div>
        <p id="main_title">{{ main_title }}</p>
        <p id="subtitle">Work Permit And Entry Request</p>
    </div>
</div>
{% endblock header_center %}

{% block wp_info %}
    <div style="margin-left: 100px;">
        <b>
            <p style="display: flex; justify-content: space-evenly; width: 100%;">
                <span></span>
                <span>Vendor Name: {{ vendor_name }}</span>
                <span style="margin-left: auto;">NO: {{ workpermit_no }}</span>
            </p>
        </b>
    </div>
    <div class="mr ">
    <br>
    <br>
    <table>
        <thead>
            <tr>
                <th>
                    Document Type: 
                </th>
                <th>
                    {{ report_subtitle }}
                </th>
            </tr>
        </thead>
    </table>
    </div>

    {% if wp_info  %}
    <table>
        {% for info in wp_info['questions'] %}
            {% if info['question__quesname'] != 'Name Of People Working/Visiting' %}
            <div class="mr">
                <tr>
                    <td>
                        <span>{{ info['question__quesname'] }}:</span>{{ "&nbsp;"*5 }}
                    </td> 
                    <td>
                        <span class="subtle-black " style="width: 100%;">{{ info['answer'] }}</span>
                    </td>
                </tr>
            </div>
            {% else %}
                {% set peoples = info['answer'].split(',') %}
                    <tr class ="spaced-row-before" >
                        <td>
                            <span>Name of People Working:</span>{{ "&nbsp;"*5 }}
                        </td>
                        <td>
                            <span class="subtle-black" >1. &nbsp;{{ peoples[0]  }}</span>
                        </td>
                    </tr>
                    {% for i in range(1, peoples|count) %}
                    <tr>
                        <td></td>
                        <td class="subtle-black">{{ loop.index + 1 }}. &nbsp;{{ peoples[i].strip() }}</td>
                    </tr>
                    {% endfor %}
                    <tr  class ="spaced-row-after">
                        <td></td>
                    </tr>
            {% endif %}
        {% endfor %}
    </table>
    {% endif %}
{% endblock wp_info %}


{% block wp_sections %}
<br>
<table id="wp_sections">
    {% for section in wp_sections %}
        <thead>
            <tr>
                <th>{{ section['section'] }}</th>
                <th>OPTIONS</th>
                <th>ANSWERED</th>
            </tr>
        </thead>
        <tbody>
            {% for question in section['questions'] %}
            <tr>
                <td>{{ question['question__quesname'] }}</td>
                {% set current_options = question['options'].replace(',', ' / ') %}
                <td>{{ current_options }}</td>
                <td>{{ question['answer'] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    {% endfor %}
</table>
{% endblock wp_sections %}
<br>

{% block rwp_section %}
<br>
    {% if verifiers_status=='APPROVED' and approvers_status=='APPROVED' %}
    <table border="1">
        {% for section in rwp_info %}
            <thead>
                <tr>
                    <th>{{ section['section'] }}</th>
                    <th>Answer</th>
                </tr>
            </thead>
            <tbody>
                {% for question in rwp_info[0]['questions'] %}
                    <tr>
                        <td >{{ question['question__quesname'] }}</td>
                        <td >{{ question['answer'] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
                {% endfor %}
            </table>
        {% endif %}
    </table>
    <br>
    <br>
    {% if approvers and verifiers %}
        <div style="display: flex; justify-content: space-between; gap: 20px;">
            <div id="approved-by-table" style="flex: 1;">
                <table  style="width: 100%; border-collapse: collapse;text-align: center;">
                    <thead>
                        <tr>
                            <th>Approved By</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for approver in approvers %}
                            <tr>
                                <td>{{ approver }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        
            <div id="verified-by-table" style="flex: 1;">
                <table  style="width: 100%; border-collapse: collapse;text-align: center;">
                    <thead>
                        <tr>
                            <th>Verified By</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for verifier in verifiers %}
                            <tr>
                                <td>{{ verifier }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% endif %}

        
        <div class="border-class">
            <br>
            <br>
            <table>
                <thead>
                    <tr>
                        <th>HSEQ Guidelines/ Instructions:</th>
                    </tr>
                </thead>
            </table>
            <h4>General:</h4>
            <ol>
                <li>This work permit is intended primarily to safeguard people and property of the company.</li>
                <li>The work permit is required to work in all areas of the company.</li>
                <li>Risk assessment should be carried out at site by initiator and executor before starting the work</li>
                <li>In case of emergency the executor to stop the job and intimate the initiator and wait for further
                    instruction.</li>
                <li>Work at height /work alone activities are not permitted during night shifts.</li>
                <li>This permit is valid up to the time mentioned and any extension of the work permit should be duly authorized
                    by responsible person only.</li>
                <li>Executor of this permit should have awareness of the PPE requirement to carryout assigned work.</li>
                <li>Executor should report all the incidents/ hazards to the initiator.</li>
                <li>Executor to carry a copy of the work permit during working hours and ensure the proper closing of the work
                    permit.</li>
                <li>Executor to ensure work area is clear and returned to safe condition, appropriate storage and avoid dumping
                    of wastages in site</li>
                <li>Ensure all debris are cleared and kept at the designated areas <span
                        style="text-decoration: underline;"></span> on a daily basis.</li>
            </ol>
            <h4>Personal Protection Equipment (PPEs):</h4>
            <ol>
                <li>All personnel deployed for the work should have the appropriate PPE’s as required for the job</li>
                <li>All Persons should be provided with Safety Shoes, Safety Goggles, gloves and Helmet as a basic minimum.
                </li>
                <li>All PPE’s should be as per the IS / EN standards as applicable, as it is required to meet the basic Safety
                    standard to protect the individual in case of any accident</li>
                <li>Electrical tools should have proper insulation </li>
                <li>All Electrical PPE’s should be as per the rating required – e.g. Insulated gloves, face shield, aprons etc
                </li>
                <li>All tools and tackles should be checked before every use and stored properly in a safe manner</li>
                <li>Where the sound level exposure is high then appropriate ear plug / ear muff to be used</li>
                <li>MEWP/Lifting tools and tackles should be inspected by authorized personnel.</li>
            </ol>
        
            <h5>Electrical Work:</h5>
            <ol>
                <li>For work inside the substation, ensure to take approval from site Supervisor / Site Lead and Client.</li>
                <li>All operators should have electrical valid license (as applicable) and verified by approving authority.</li>
                <li>Appropriate Electrical PPE is to be ensured before carrying out any electrical related work at the premises.
                </li>
                <li>LOTO procedure should be ensured before commencing any maintenance work at the site and to be validated by
                    the Electrical Supervisor / FM only and to be verified before start of activity.</li>
                <li>Documents like manual, work instructions, Standard operating procedure, operator license, rope strength etc.
                    to be checked in advance.</li>
                <li>Check for Service partners /sub-contractor licenses and competency for Electrical high voltage activity.
                </li>
                <li>Check for Calibration certificates of electronic equipment and tools inspection.</li>
                <li>PTW and LOTO details to be cross referenced for ease of identification</li>
            </ol>
        
            <div class="electrical-work">
                Electrical high voltage (more than 1000 volts) – Ensure all requirements as per the ISS SOP are followed with
                appropriate PPEs, Competent personnel, legal compliances, all appropriate tools and tackles to be inspected and
                have emergency response plan.
            </div>
        
            <h4 class="color-red">Please Note:</h4>
            <p>Kindly report to your Supervisor/Site Lead/HSE Manager:</p>
            <ol>
                <li>Any Hazards observed.</li>
                <li>Incident / Near miss incident happen/ observed.</li>
                <li>Any unsafe Act / Unsafe conditions observed.</li>
                <li>In case of any doubt – STOP WORK and assess the risk before continuing with the activity.</li>
                <li>Damaged equipment etc.</li>
                <li>Any spills or leak observed.</li>
            </ol>
        
        </div>
{% endblock rwp_section %}


