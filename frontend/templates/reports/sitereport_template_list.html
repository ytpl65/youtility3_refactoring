{% extends "base_list.html" %}


<!---- BEGIN CARD TITLE ------>
{% block card_title %}
Site Report List
{% endblock card_title %}
<!----- END CARD TITLE -------->

{% block extra_css %}
{% endblock extra_css %}


<!------------------------------------ BEGIN PAGE BREADCUMBS ------------------------------------>
{% block pagebreadcumb %}
{{ super() }}
<li class="breadcrumb-item pe-3"><a href="javascript:void(0)" class="pe-3">Site Report List</a></li>
{% endblock pagebreadcumb %}
<!------------------------------------- END PAGE BREADCUMBS ------------------------------------->


{% block table %}
    <table id="siteReportList" class="display cell-border compact hover">
        <thead class="fw-bold fs-6">
            <th>Id</th>
            <th>Site Report</th>
            <th>Enable</th>
        </thead>
    </table>
{% endblock table %}

{% block extra_scripts %}
<script>
$(document).ready(function () {

    $("#siteReportList").DataTable({
        ajax:{
            url:"{{ url('reports:sitereport_template_list') }}",
            data: {
                format: 'raw',
                action: 'calls'
            }
        },
        responsive: true,
        serverSide:true,
        processing    : true,
        responsive    : true,
        fixedHeader: true,
        language: {
            search:"_INPUT_",
            searchPlaceholder: "Search...",
            processing:"Searching Data"},
        search      : {return: true},
        lengthMenu: [[10, 20, 30], [10, 20, 30]],
        dom:`<'row' <'col-sm-6 d-flex justify-content-start'f> <'col-sm-6 d-flex justify-content-end'B> >rt<'row' <'col-sm-6'l> <'col-sm-6'p><'col-sm-12 d-flex justify-content-center'i>>`,
        columnDefs:[
            {data:'id',targets: 0,visible: false},
            {
                data:'qsetname',
                targets:2,
                render:function(data, type, row, meta){
                    var url= "{{ url('reports:sitereport_template_form') }}?template=true&id=" + row['id'];
                    return `<a href=${url}>${data}</a>`
                }
            }
        ],
        columns:[
            {data:'id'},{data:'qsetname'}, {data:'enable'}
        ],
        buttons:[
            {
                text:`Add New &nbsp;<i class='fas fa-plus ch4'></i></a>`,
                className: "btn btn-sm btn-light-primary",
                action: function(e, dt, node, config){
                    //This will send the page to the location specified
                    console.log("hitted success")
                    window.location.href = "{{ url('reports:sitereport_template_form') }}?template=true";
                }
            }
        ]

    })
    $('.btn').removeClass('dt-button')
})
</script>
{% endblock extra_scripts %}