{% extends "partial_base.html" %}

{% block head %}
{{ ta_form.media.css }}
{% endblock head %}
{% macro typeassist_form() %}
{% for field in ta_form %}
			<div class="mb-3 row">
				<!--LABEL FIELD-->
				<label class="col-md-2">{{ field.label }}</label>
				<!--INPUT GROUP-->
				<div class="col-md-10 input-grp">
					{{ field }}
					<!--HELP TEXT-->
					{% if field.help_text %}
					<small>{{ field.help_text }}</small>
					{% endif %}
					<!--ERROR FIELD-->
					{{ field.errors }}
				</div>
			</div>
		{% endfor %}
		<input type="hidden" name="{{ ta_form.ctzoffset.name }}" id = "{{ ta_form.ctzoffset.auto_id }}" value="-1">
{% endmacro %}
{% block body %}
<form action="" method="post" id="id_taform">
	<input type="hidden" name="pk" id="pk" value="{{ ta_form.instance.pk }}">
	<div class="modal-header border-0">
		<h3 class="modal-title modal-heading" id="exampleModalLabel">Create TypeAssist <i class="fas fa-poll-h fa-sm ch4"></i></h3>
		<button type="button" class="btn-sm btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	</div>
	<div class="modal-body" id="partial">
		<div class="alert alert-danger alert-dismissible fade show" id="nonfield_errors"role="alert" style="display:none">
			<strong>Error</strong> <span></span>
			<button type="button" class="btn-sm btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>

		{{ typeassist_form() }}
	</div>
</form>
	
	<div class="modal-footer border-0 pt-0">
		<button type="button" class="btn btn-sm btn-secondary btn-hover-scale" data-bs-dismiss="modal">Close <i class="fas fa-times"></i></button>
		{% if ta_form.instance.tacode %}
		<button type="submit" id="submit" form="id_taform" class="btn btn-sm btn-primary btn-hover-scale">Update&nbsp;<i class="fas fa-cloud-upload-alt"></i></button>
		<button type="button" onclick="deleteTa(this)" data-id="{{ ta_form.instance.id }}" id="deleteCap" class="btn btn-sm btn-hover-scale btn-danger">Delete&nbsp;<i class="fas fa-trash-alt"></i></button>
		{% else %}
		<button type="submit" form="id_taform" class="btn btn-sm btn-primary btn-hover-scale">Add&nbsp;<i class="fas fa-cloud-upload-alt"></i></button>
		{% endif %}
	</div>

{% endblock body %}


{% block js %}
{{ ta_form.media.js }}
<script>
$(document).ready(() => {
	//set ctzoffset
  	$("#id_ctzoffset").val(-new Date().getTimezoneOffset())
	
	$("#modal-ta").find("select").djangoSelect2({
		dropdownParent: $('#modal-ta')
    })
})
</script>
{% endblock js %}
