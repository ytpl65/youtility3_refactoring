{% extends "base_form.html" %}

<!---- BEGIN PAGE TITLE ---->
{% block title %}
BuisinessUnit Form
{% endblock title %}
<!---- END PAGE TITLE ---->

<!-------------------------- BEGIN PAGE BREADCUMB ----------------------->
{% block pagebreadcumb %}
<!--will call parent contents -->
{{ super() }}
<li class="breadcrumb-item pe-3"><a href="{{ url('onboarding:bu_list') }}" class="pe-3">Bu List</a></li>
<li class="breadcrumb-item pe-3"><a href="javascript:void(0)" class="pe-3">Bu Form</a></li>
{% endblock pagebreadcumb %}
<!-------------------------- END PAGE BREADCUMB ------------------------->

<!-------------  BEGIN POP-UPS CODE -------------->
{% block popup_alerts %}
	{% if edit is defined %}
	<!-- to delete an instance with popup_alert pass the delete_url_name, instance_id, popup_title, popup_id -->
		{% call popup_alert('onboarding:bu_delete', buform.instance.btid, title="Delete", popup_id="delete_alert") %}
			<h4>Are you sure, you want to delete this?</h4>
		{% endcall %}
	{% endif %}
{% endblock popup_alerts %}
<!-------------  END POP-UPS CODE -------------->


<!------ BEGIN FORM TITLE ------->
{% block form_title %}
BuisinessUnit
{% endblock form_title %}
<!------ END FORM TITLE -------->


<!--------- BEGIN NON FIELD ERRORS -------->
{% block nonfield_errors %}
	{% if buform.non_field_errors() %}
	<div id="non_field_error" class="alert alert-danger" style="width: 73%;">
		{% for error in buform.non_field_errors() %}
		{{ error }}
		{% endfor %}
		<button type="button" class="btn-close flt-right" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
	{% endif %}
{% endblock nonfield_errors %}
<!---------- END NON FIELD ERRORS --------->


<!----------- BEGIN FORM MESSGES --------------->
{% block form_msgs %}
	{% for msg in get_msgs(request) %}
	<div class="alert {% if msg.tags %} {{ msg.tags }} {% endif %} " id="alert_msg" style="width:73%; ">
		{{ msg }}
		<button type="button" class="btn-close flt-right" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
	{% endfor %}
{% endblock form_msgs %}
<!----------- END FORM MESSGES ----------------->


<!-------------- BEGIN FORM ------------------->
{% block form %}
		<form action="" method="post" id="id_buform">
			<!-------------------------- CSRF MIDDLEWARE TOKEN --------------------->
			<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

			<div class="mb-3 row g-3 gx-6">
				{% for field in buform %}
				{% if (field.widget_type != 'checkbox' and field.name not in ['skipsiteaudit',
				'enablesleepingguard', 'gpsenable', 'deviceevent']) %}
				<!--LABEL FIELD-->
				{% if loop.index <6 %}
				{{ field.label_tag() }}
				<!--INPUT GROUP-->
				<div class="col-md-4">
					{{ field }}
					<!--HELP TEXT-->
					{% if field.help_text %}
					<small>{{ field.help_text }}</small>
					{% endif %}
					
					<!----- BEGIN ERROR FIELD  ------->
					{{ field.errors }}
					<!----- END ERROR FIELD  ------->
				</div>
				{% else %}


				<!------ BEGIN LABEL FIELD ----->
				{{ field.label_tag() }}
				<!------ END LABEL FIELD ------->
				
				<!------------- BEGIN INPUT GROUP ------------>
				<div class="col-md-4">
					{{ field }}
					<!---------- BEGIN HELP TEXT ----------->
					{% if field.help_text %}
					<small>{{ field.help_text }}</small>
					{% endif %}
					<!---------- END HELP TEXT ----------->
					
					<!----- BEGIN ERROR FIELD  ------->
					{{ field.errors }}
					<!----- END ERROR FIELD  ------->
				</div>
				<!------------- END INPUT GROUP -------------->
				{% endif %}
				{% endif %}

				{% endfor %}
				<!------------ BEIGN CHECKBOX RENDERING LAST --------------------->
				<div class="booleans col-md-6 d-flex justify-content-sm-between mt-5">
					{% for checkbox_field in buform %}
					{% if (checkbox_field.widget_type=='checkbox' and checkbox_field.name not in['skipsiteaudit',
				'enablesleepingguard', 'gpsenable', 'deviceevent']) %}
					<label for={{ checkbox_field.id_for_label }}
						class="form-check-label bool col-form-label me-5 text-sm-right">{{ checkbox_field }}
						&nbsp{{ checkbox_field.label }}</label>
					{% endif %}
					{% endfor %}
				</div>
				<!------------ END CHECKBOX RENDERING LAST ------------------------>
			</div>
		</form>
{% endblock form %}
<!------------- END FORM ---------------------->


<!------------------- BEGIN FORM PAGE ACTIONS -------------->
{% block formpage_actions %}
{% if edit is defined %}
    {{ form_update('id_buform', popup_id="delete_alert") }}
{% else %}
    {{ form_create('id_buform') }}
{% endif %}
{% endblock formpage_actions %}
<!------------------- END FORM PAGE ACTIONS --------------->


<!--------------- BEGIN PAGE-LEVEL EXTRA SCRIPTS --------------->
{% block extra_scripts %}
<script>
$(document).ready(function(){
	//hide the delete button when instance is not saved yet.
	if('{{buform.instance.btid}}'=='None'){
		$("#btn_del").hide()
	}
})
</script>
{% endblock extra_scripts %}
<!--------------- END PAGE-LEVEL EXTRA SCRIPTS --------------->
