<!doctype html>
<html lang="en">
<head>
  <meta name="viewport" content="width = device-width, initial-scale = 1" />
  <meta content="text/html;charset = utf-8" http-equiv="Content-Type">
  
  <!-- BEGIN PAGEL LEVEL FONTS & ICONS START -->
  <link rel="preconnect" href="https://fonts.gstatic.com" type="text/css"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700"  type="text/css"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" type="text/css"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css"/>
  <!-- END PAGEL LEVEL FONTS & ICONS END -->
  
  <!-- BEGIN GLOBAL STYLESHEETS BUNDLE (used by all pages) -->
  <link href="{{ static('assets/plugins/global/plugins.bundle.css') }}" rel="stylesheet" type="text/css" />
  <link href="{{ static('assets/css/style.bundle.css') }}" rel="stylesheet" type="text/css" />
  {# <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/ui-darkness/jquery-ui.css"> #}



  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" type="text/css"/>
  <link rel="shortcut icon" type="image/jpg" href="{{ static('assets/media/images/favicon.ico') }}"/>

  <!-- END GLOBAL STYLESHEETS BUNDLE (used by all pages) -->

  <!-- BEGIN PAGE LEVEL STYLESHEETS -->  

<!----FOR BASE_LEVEL ---->
  {%- block base_head -%}

  {% endblock base_head %}
<!----END FOR BASE_LEVEL ---->
  

  <!-- END PAGE LEVEL STYLESHEETS -->
  <title>
  {%- block title -%}
  
  {% endblock title %}
  </title>

  {%- block wizard_head -%}
  
  {% endblock wizard_head %}
<!--PAGE LEVEL --->
{%- block extra_css -%}

{% endblock extra_css %}
<!----END FOR PAGE_LEVEL ---->
<link href="{{ static('assets/css/local/global_level.css') }}" rel="stylesheet" type="text/css" />
</head>

<body id="kt_body"
  class="header-fixed header-tablet-and-mobile-fixed toolbar-enabled toolbar-fixed toolbar-tablet-and-mobile-fixed aside-enabled aside-fixed"
  style="--kt-toolbar-height:55px;--kt-toolbar-height-tablet-and-mobile:55px" data-kt-aside-minimize = 'on'>
  <input type="hidden" id="urlname" data-url = ''>
  {%- block body -%}
  
  {% endblock body %}

  <!-- BEGIN  GLOBAL JS BUNDLE (used by all pages) -->
  <script src="{{ static('assets/plugins/global/plugins.bundle.js') }}"></script>
  <script src="{{ static('assets/js/scripts.bundle.js') }}"></script>
  {# <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script> #}

  <!-- END  GLOBAL JS BUNDLE (used by all pages) -->

<script>
  // tojson filter converts python datatypes to json datatypes.
  var   session            = {{ dict(request.session) |default ("") | tojson }}
  console.log("session", session)
  const newWizardUrl       = "{{ url('onboarding:wizard_view') }}"
  const deleteWizardUrl    = "{{ url('onboarding:wizard_delete') }}"
  const WizardViewUrl      = "{{ url('onboarding:wizard_view') }}"
  const saveAsDraftUrl     = "{{ url('onboarding:save_asdraft') }}"
  const deleteFromDraftUrl = "{{ url('onboarding:delete_from_draft') }}"
  var dontBlock = false;
  var target = document.querySelector("body")
  var blockUI = new KTBlockUI(target, {
    message: "<div class='blockui-message'><span class='spinner-border text-primary'></span>Loading...</div>",
  });
  function startBlockUi(){
    if(!dontBlock)
      blockUI.block();
  }
  
  function endBlockUi(){
    if (blockUI.isBlocked()) {
        blockUI.release();
    } 
  }
</script>
<!-- BEGIN GLOBAL-CUSTOM-FILE LEVEL SCRIPTS --> 
 <script src="{{ static('assets/js/local/custom.js') }}?v=2" type="text/javascript"></script>
<!-- END GLOBAL-CUSTOM-FILE LEVEL SCRIPTS -->

  <!-- BEGIN GLOBAL-INLINE CUSTOM SCRIPTS -->
  <script>
    /*=================================
    to load script before dom-load write
    them outside of "$(document).ready()"
    ==================================*/
    
    // add classes to label tags.
    //$('label').addClass("col-form-label col-md-2 col-sm-2 text-sm-right") 

    $('body').removeClass('modal-open');
    
    // remove classes for checkboxes which are added by default. 
    $('.booleans label').removeClass("col-md-2 col-sm-2")
    
    // remove form-control for select tags.
    $('select').removeClass("form-control") 
    
    // add classes to checkboxes.
    $(".booleans").addClass("form-check form-switch form-check-custom form-check-solid") 


    $('.closeit').click(function () {
    $('body').removeClass('modal-open');
    });
 
    // handles rendering of sidebar menus based on user capabilities stored in sessiion.
    handle_rendering_of_menus(session); 

    // create environment for onboarding wizard.
    make_env_for_wizard(session);
    

    /*============================
    to load scripts after dom-load write
    them under "$(document).ready()"
    ==============================*/
    
    $(document).ready(function() {
      //adds styles to non-field-errors
      $("#alert_msg").fadeTo(2000, 500).slideUp(500, function(){
        $("#alert_msg").slideUp(700);
      })
      //container padding-top 0 for wizard
      $('#kt_content').addClass('pt-1')
          
      //controls wizard steps-bar
      stepper_controller(session);

      //sets closeonSelect to false for multiple-select fields
      $("[multiple]").select2({
          closeOnSelect:false 
      })

    })
  </script>
  <!-- END GLOBAL-INLINE CUSTOM SCRIPTS -->
  

{% block switchSiteScript %}

{% endblock switchSiteScript %}


  <!-- BEGIN BASE LEVEL SCRIPTS FOR BASE PAGES -->  
  {%- block base_script -%}

  {% endblock base_script %}
  <!-- END BASE LEVEL SCRIPTS FOR BASE PAGES-->

<!-------- BEGIN SCRIPTS FOR NON-BASE PAGES ------->
  {%- block extra_scripts -%}
  {% endblock extra_scripts %}
  <!-------- END SCRIPTS FOR NON-BASE PAGES ------->
</body>

<!---------------------- SWITCH SITE MODAL -------------------------->
<div class="modal" tabindex="-1" role="dialog" id="popupshow_Attachment">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-indicators">
          </div>
          <div class="carousel-inner">
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
          </button>
          </div>
        </div>
      </div>
    </div>
    </div>
    <div id="popup_switch_site" class="modal fade" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title bold">Switch Site</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <div class="alert alert-danger site_err_msg"  id="site_err_popup" style="display:none">
                  <button type="button" class="close" data-dismiss="alert">x</button>
                  <strong>Error! </strong>
                </div>
                <div class="alert alert-success site_success_msg"  id="site_success_popup" style="display:none">
                  <button type="button" class="close" data-dismiss="alert">x</button>
                  <strong>Success! </strong>
                </div>
                <form id="SwitchSiteForm" name="SwitchSiteForm" action="" method="post">
                    <input type="hidden" name="oper" id="switchsite_oper" value="edit">
                    <input type="hidden" name="id" id="switchsite_id" value="">
                    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                    <div class="row g-3">
                        <div class="col-md-3"><label>Current Site:</label></div>
                        <div class="col-md-9">
                            <div >
                              <input type="text" name="defaultsite" value="" id="id_defaultsite" readonly required class="form-control" maxlength="250" />
                            </div>
                        </div>
                        <div class="col-md-3"><label>Other Sites:</label></div>
                        <div class="col-md-9">
                            <div >
                              <select class="form-select form-select-solid" name="assignesite" id="id_assignesite"  data-control="select2" required  maxlength="20">
                              <option>NONE</option>
                              </select>
                          </div>
                       </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary font-weight-bold" id="btnSwitchSite" name="btnSwitchSite" >Switch</button>
                <button type="button" class="btn btn-danger font-weight-bold" data-bs-dismiss="modal">Cancel </button>
            </div>
  
          </div>
      </div>
    </div>
<!---BEGIN POP-UP/MODAL'S CODE HERE--->
  {%- block popup_alerts -%}
  
  {% endblock popup_alerts %}
<!---END POP-UP/MODAL'S CODE HERE--->
</html>

