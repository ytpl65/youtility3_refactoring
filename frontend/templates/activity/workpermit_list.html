{% extends "base_list.html" %}

<!---- BEGIN CARD TITLE ------>
{% block card_title %}
WorkPermit List
{% endblock card_title %}
<!----- END CARD TITLE -------->

{% block extra_css %}
{% endblock extra_css %}

<!------------------------------------ BEGIN PAGE BREADCUMBS ------------------------------------>
{% block pagebreadcumb %}
{{ super() }}
<li class="breadcrumb-item pe-3"><a href="javascript:void(0)" class="pe-3">Work Permit List</a></li>
{% endblock pagebreadcumb %}
<!------------------------------------- END PAGE BREADCUMBS ------------------------------------->


{% block table %}
<table id="wp_list" class="display compact cell-border" style="width:100%">
</table>
{% endblock table %}

{% block extra_scripts %}
<script>
$(document).ready(function(){

    table = $("#wp_list").DataTable({
        ajax:{
            url:'{{ url("activity:workpermit") }}?action=list'
        },
        deferRender:true,
        responsive:true,
        lengthMenu:[[10,20,30], [10,20,30]],
        dom:`<'row' <'col-sm-6 d-flex justify-content-start'f> <'col-sm-6 d-flex justify-content-end'B> >rt<'row'
                <'col-sm-6'l> <'col-sm-6'p><'col-sm-12 d-flex justify-content-center'i>>`,
        columns:[
            { data:'id', visible:false, searchable:false},
            {title:'Plandatetime', data:'cdtz'},
            {title:'Permit No', data:'seqno'},
            {title:'Work Permit Report', data:'wptype'},
            {title:'Approved By', data:'peoplename'},
            {title:'Approval', data:'wpstatus'},
            {title:'Status', data:'workstatus'},
            {title:'Action', data:null, defaultContent:null}
        ],
        columnDefs:[
            {targets:1, render:function(data, type, row, meta){
                    return convert_to_local(type, data, row)
                }},
        ],
        buttons:[
            {
                text: 'Add New',
                className: "btn btn-sm btn-light-primary",
                action:function(e, dt, node, config){
                    location.href = '{{ url("activity:workpermit") }}?action=form'
                }
            }
        ]
    })
    $('.btn').removeClass('dt-button')


})

</script>

{% endblock extra_scripts %}