{% extends "base_form.html" %}

{% block extra_css %}
{{ workpermit_form.media.css }}
<link  href="{{ static('assets/plugins/custom/DataTables/datatables.min.css') }}" rel="stylesheet" type="text/css"/>
<link  href="{{ static('assets/plugins/custom/Editor-2.0.8/css/editor.dataTables.min.css') }}" rel="stylesheet" type="text/css"/>
{% endblock extra_css %}

<!-------------------------- BEGIN PAGE BREADCUMB ----------------------->
{% block pagebreadcumb %}
<!--will call parent contents -->
{{ super() }}
<li class="breadcrumb-item pe-3"><a href="{{ url('activity:workpermit') }}?template=true" class="pe-3">Work Permits</a></li>
<li class="breadcrumb-item pe-3"><a href="javascript:void(0)" class="pe-3">Work Permit Form</a></li>
{% endblock pagebreadcumb %}
<!-------------------------- END PAGE BREADCUMB ------------------------->

<!------ BEGIN FORM TITLE ------->
{% block form_title %}
Work Permit Form
{% endblock form_title %}
<!------ END FORM TITLE -------->

{% block ajax_page_actions %}
<div class="form-actions">
    {% if workpermit.instance.id %}
    <button type="submit" id="submitTour" form="workpermitForm" class="btn btn-sm btn-primary btn-hover-scale">
        Update &nbsp;<i class="fas fa-cloud-upload-alt"></i>
    </button>

    <button type="button" onclick="deleteWorkpermit(this)" data-id="{{ workpermit.instance.id }}" id="deleteAttd"
        class="btn btn-sm btn-danger btn-hover-scale">
        Delete&nbsp;<i class="fas fa-trash-alt"></i>
    </button>
    {% else %}
    <button type="submit" form="workpermitForm" class="btn btn-sm btn-primary btn-hover-scale">
        Save &nbsp;<i class="fas fa-cloud-upload-alt"></i>
    </button>
    {% endif %}
</div>
{% endblock ajax_page_actions %}

{% block extras %}
    <br><br><br>
    <div class="report_section">
    <div class="row mb-3">
        <div class="col-sm-12 card">
            <div class="card-body">
                <table id="tabSitereports" class="display cell-border compact hover">
                </table>
            </div>
        </div>
    </div>
    </div>
{% endblock extras %}


{% block extra_scripts %}
{{ workpermit_form.media.js }}
<script src="{{ static('assets/plugins/custom/DataTables/datatables.min.js') }}" type="text/javascript"></script>
<script src="{{ static('assets/plugins/custom/DataTables/Select-1.3.4/js/dataTables.select.min.js') }}" type="text/javascript"></script>
<script src="{{ static('assets/plugins/custom/Editor-2.0.8/js/dataTables.editor.min.js') }}" type="text/javascript"></script>
<script src="{{ static('assets/plugins/custom/Editor-2.0.8/js/editor.select2.js') }}" type="text/javascript"></script>
<script>

    $(document).ready(function(){
        editor = new $.fn.dataTable.Editor( {
            table: "#tabSitereports",
            fields: [
                {
                    label: "Answer",
                    name: "answer"
                }
                ]
        } );

        table = $("#tabSitereports").DataTable({
            ajax:{
                url:"{{ url('activity:workpermit') }}"
            },
            columns:[
                {data:'seqno', title:'SNo'},
                {data:'question', title:'Question'},
                {data:'answer', title:'Answer'}
            ],
            select: {
                style:    'os',
                selector: 'td:first-child'
            },
            buttons: [
                { extend: 'create', editor: editor },
            ]
        })

    })

</script>
{% endblock extra_scripts %}